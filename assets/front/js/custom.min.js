gsap.registerPlugin(ScrollTrigger);

// Script for AOS Animation Initialize
AOS.init();

// MAIN SLIDER
function mainSlider() {
	var interleaveOffset = 0.5;
	var swiperOptions = {
		loop: true,
		speed: 1000,
		parallax: true,
		// autoplay: {
		//     delay: 3500,
		//     disableOnInteraction: false,
		// },
		autoplay: false,
		grabCursor: false,
		pagination: {
			el: '.swiper-pagination',
			clickable: true
			// type: "fraction",
		},
		navigation: {
			nextEl: '.swiper-next',
			prevEl: '.swiper-prev'
		},
		on: {
			progress: function () {
				var swiper = this;
				for (var i = 0; i < swiper.slides.length; i++) {
					var slideProgress = swiper.slides[i].progress;
					var innerOffset = swiper.width * interleaveOffset;
					var innerTranslate = slideProgress * innerOffset;
					swiper.slides[i].querySelector('.slide-inner').style.transform = 'translate3d(' + innerTranslate + 'px, 0, 0)';
				}
			},
			touchStart: function () {
				var swiper = this;
				for (var i = 0; i < swiper.slides.length; i++) {
					swiper.slides[i].style.transition = '';
				}
			},
			setTransition: function (speed) {
				var swiper = this;
				for (var i = 0; i < swiper.slides.length; i++) {
					swiper.slides[i].style.transition = speed + 'ms';
					swiper.slides[i].querySelector('.slide-inner').style.transition = speed + 'ms';
				}
			}
		}
	};

	const swiper = new Swiper('.homeSlider', swiperOptions);

	// DATA BACKGROUND IMAGE
	var pageSection = $('.bg-image');
	pageSection.each(function (indx) {
		if ($(this).attr('data-background')) {
			$(this).css('background-image', 'url(' + $(this).data('background') + ')');
		}
	});
}
mainSlider();

//gsap loader
const tl = gsap.timeline({ duration: 0.1 });
function preLoader(tl) {
	tl.to('.preLoader.black > img', {
		delay: 1,
		y: 50,
		autoAlpha: 0
	})
		.to('.preLoader.black', {
			yPercent: -100
		})
		.to('.preLoader.white', {
			yPercent: -100
		})
		.to('.preLoader', {
			css: {
				display: 'none'
			}
		});
}

// function initialization
$(window).on('load', function () {
	preLoader(tl);
});

var instaSlider = new Swiper('.instaSlider', {
	loop: true,
	slidesPerView: 5,
	spaceBetween: 15,
	// If we need pagination

	breakpoints: {
		1024: {
			slidesPerView: 5,
			spaceBetween: 15
		},
		768: {
			slidesPerView: 3,
			spaceBetween: 20
		},
		640: {
			slidesPerView: 2,
			spaceBetween: 10
		},
		576: {
			slidesPerView: 2,
			spaceBetween: 10
		},
		375: {
			slidesPerView: 1,
			spaceBetween: 10
		}
	},

	// Navigation arrows
	navigation: {
		nextEl: '.swiper-button-next',
		prevEl: '.swiper-button-prev'
	},

	pagination: {
		el: '.swiper-pagination',
		clickable: true
		// type: 'fraction'
	},
	// And if we need scrollbar
	scrollbar: {
		el: '.swiper-scrollbar'
	}
});

$('.testimonialSlider').slick({
	autoplay: true,
	autoplaySpeed: 5000,
	dots: true,
	arrows: false,
	infinite: true,
	slidesToShow: 3,
	slidesToScroll: 1,
	prevArrow: '<button type="button" class="slick-prev"><i class="fas fa-angle-double-left"></i></button>',
	nextArrow: '<button type="button" class="slick-next"><i class="fas fa-angle-double-right"></i></button>',
	responsive: [
		{
			breakpoint: 1199,
			settings: {
				slidesToShow: 2
			}
		},
		{
			breakpoint: 768,
			settings: {
				slidesToShow: 2,
				arrows: false
			}
		},
		{
			breakpoint: 575,
			settings: {
				slidesToShow: 1,
				arrows: false
			}
		}
	]
});

$('a[href="#search"]').on('click', function (event) {
	event.preventDefault();
	$('#search').addClass('open');
	$('#search > form > input[type="search"]').focus();
});

$('#search, #search button.close').on('click keyup', function (event) {
	if (event.target == this || event.target.className == 'close' || event.keyCode == 27) {
		$(this).removeClass('open');
	}
});
